<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Security Family</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
    <!--
    <ion-list >
      <ion-item *ngFor="let loc of locations" >
        {{loc.latitude}} / {{loc.longitude}} 
      </ion-item>
    </ion-list>  
    -->
    msg: {{ msg }}
    
    <agm-map [latitude]="lat" [longitude]="lng" [zoom]="12">
      <agm-marker [latitude]="loc.latitude" 
                  [longitude]="loc.longitude" 
                  [markerDraggable]="false"
                  *ngFor="let loc of locations">
        <agm-info-window>
          <img src="https://s.gravatar.com/avatar/1a5be3320c6e21daa76a8940ba2b9184?s=80">
          <h4>{{ loc.name }}</h4>
          <p>{{ loc.time | date:'dd/MM/yyyy hh:mm:sss' }}</p>
        </agm-info-window>
      </agm-marker>
    </agm-map>

</ion-content>
<ion-footer>
  <button ion-button (click)="startBackgroundGeolocation()"
    [disabled]="started">Start</button>
  <button ion-button (click)="stopBackgroundGeolocation()"
    [disabled]="!started">Stop</button>

  <button ion-button (click)="getLocations()">Locations</button>
</ion-footer>
